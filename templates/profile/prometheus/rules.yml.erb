# Managed by puppet (nebula/profile/prometheus/rules.yml.erb)
groups:
- name: hardware
  rules:
  - alert: InstanceDown
    expr: up == 0
    for: 10m
    labels:
      severity: page
    annotations:
      summary: 'Node {{$labels.hostname}} isn''t responding to Prometheus.'
  - alert: DiskPressure
    expr: '((avg_over_time(node_filesystem_size[1m]) - avg_over_time(node_filesystem_avail[1m])) / avg_over_time(node_filesystem_size[1m])) > .95'
    for: 30m
      severity: ticket
    annotations:
      summary: 'Filesystem {{$labels.hostname}}:{{$labels.mountpoint}} is more than 95% full.'
  - alert: DiskFull
    expr: '((avg_over_time(node_filesystem_size[1m]) - avg_over_time(node_filesystem_avail[1m])) / avg_over_time(node_filesystem_size[1m])) > .99'
    for: 5m
      severity: page
    annotations:
      summary: 'Filesystem {{$labels.hostname}}:{{$labels.mountpoint}} is full.'
